<h1>Updater#set_cols</h1>


<%= link_to 'Back', updater_index_path, class: "btn btn-primary" %>
<button id="but">rows</button>
<hr>
<% if !flash[:notice].blank? %>
   <div class = "alert alert-info">
      <%= flash[:notice] %>
   </div>
<% end %>


<%  if @file.main_template != nil %>
	<% template = JSON.parse(@file.main_template) %>
<% else %>
	<% template = Hash[ "item_code" => "col_0" , "price" => "col_1" , "currency" => "col_2" ,"available" => "col_3" ]%>
<% end %>

<%= bootstrap_form_tag url: updater_path(params[:updater_id]), method: 'put', layout: :inline do |f| %>
	<%= f.text_field :item_code, value: template["item_code"], class: template["item_code"] %>
	<%= f.text_field :price, value: template["price"], class: template["price"] %>
	<%= f.text_field :currency, value: template["currency"], class: template["currency"] %>
	<%= f.text_field :available, value: template["available"], class: template["available"] %>


	<%= f.submit "Apply",layout: :horizontal %>
<% end %>
<hr>
<table id="table" class="display" cellspacing="0" width="100%"  >

  <thead>
    <tr>
      <% @cols.each do |r| %>
      <th><%= r %></th>
      <% end %>
    </tr>
  </thead>

  <tfoot>
    <tr>
      <% @cols.each do |r| %>
      <th><%= r %></th>
      <% end %>
    </tr>
  </tfoot>
<% @data.each do |e| %>
			<% if e.visible == "t" %>
				<tr><% @cols.each do |r| %><td><%= e.send(r).to_s[0..25] %></td><% end %></tr>
			<% else %>
				<tr class="skip_row"><% @cols.each do |r| %><td><%= e.send(r).to_s[0..25] %></td><%end%></tr>
			<% end %>
<% end %>

</table>
<script>
$(document).ready(function() {
    var table = $('#table').DataTable();
 
    $('#table tbody').on( 'click', 'tr', function () {
        $(this).toggleClass('selected');
    } );
 
    $('#but').click( function () {
        alert( table.rows('.selected').data().length +' row(s) selected' );
    } );
} );
</script>

